package org.fossify.calendar.dialogs

import android.app.Activity
import android.view.ViewGroup
import androidx.appcompat.app.AlertDialog
import androidx.recyclerview.widget.GridLayoutManager
import androidx.recyclerview.widget.RecyclerView
import org.fossify.calendar.R
import org.fossify.calendar.adapters.EmojiAdapter
import org.fossify.calendar.databinding.DialogSelectEmojiBinding
import org.fossify.commons.extensions.getAlertDialogBuilder
import org.fossify.commons.extensions.setupDialogStuff
import org.fossify.commons.extensions.viewBinding

class SelectEventEmojiDialog(val activity: Activity, var currentEmoji: String, val callback: (emoji: String) -> Unit) {
    private var dialog: AlertDialog? = null
    private val binding by activity.viewBinding(DialogSelectEmojiBinding::inflate)

    init {
        val emojis = arrayOf(
            // Smileys & Emotion
            "ðŸ˜€", "ðŸ˜ƒ", "ðŸ˜„", "ðŸ˜", "ðŸ˜†", "ðŸ˜…", "ðŸ¤£", "ðŸ˜‚",
            "ðŸ™‚", "ðŸ™ƒ", "ðŸ˜‰", "ðŸ˜Š", "ðŸ˜‡", "ðŸ¥°", "ðŸ˜", "ðŸ¤©",
            "ðŸ˜˜", "ðŸ˜—", "ðŸ˜š", "ðŸ˜™", "ðŸ¥²", "ðŸ˜‹", "ðŸ˜›", "ðŸ˜œ",
            "ðŸ¤ª", "ðŸ˜", "ðŸ¤‘", "ðŸ¤—", "ðŸ¤­", "ðŸ¤«", "ðŸ¤”", "ðŸ¤",
            "ðŸ¤¨", "ðŸ˜", "ðŸ˜‘", "ðŸ˜¶", "ðŸ˜", "ðŸ˜’", "ðŸ™„", "ðŸ˜¬",
            "ðŸ¤¥", "ðŸ˜Œ", "ðŸ˜”", "ðŸ˜ª", "ðŸ¤¤", "ðŸ˜´", "ðŸ˜·", "ðŸ¤’",
            "ðŸ¤•", "ðŸ¤¢", "ðŸ¤®", "ðŸ¤§", "ðŸ¥µ", "ðŸ¥¶", "ðŸ¥´", "ðŸ˜µ",
            "ðŸ¤¯", "ðŸ¤ ", "ðŸ¥³", "ðŸ¥¸", "ðŸ˜Ž", "ðŸ¤“", "ðŸ§", "ðŸ˜•",
            "ðŸ˜Ÿ", "ðŸ™", "â˜¹ï¸", "ðŸ˜®", "ðŸ˜¯", "ðŸ˜²", "ðŸ˜³", "ðŸ¥º",
            "ðŸ˜¦", "ðŸ˜§", "ðŸ˜¨", "ðŸ˜°", "ðŸ˜¥", "ðŸ˜¢", "ðŸ˜­", "ðŸ˜±",
            "ðŸ˜–", "ðŸ˜£", "ðŸ˜ž", "ðŸ˜“", "ðŸ˜©", "ðŸ˜«", "ðŸ¥±", "ðŸ˜¤",
            "ðŸ˜¡", "ðŸ˜ ", "ðŸ¤¬", "ðŸ˜ˆ", "ðŸ‘¿", "ðŸ’€", "â˜ ï¸", "ðŸ’©",
            "ðŸ¤¡", "ðŸ‘¹", "ðŸ‘º", "ðŸ‘»", "ðŸ‘½", "ðŸ‘¾", "ðŸ¤–", "ðŸŽƒ",
            "ðŸ˜º", "ðŸ˜¸", "ðŸ˜¹", "ðŸ˜»", "ðŸ˜¼", "ðŸ˜½", "ðŸ™€", "ðŸ˜¿",
            "ðŸ˜¾",

            // Hearts & Symbols
            "â¤ï¸", "ðŸ§¡", "ðŸ’›", "ðŸ’š", "ðŸ’™", "ðŸ’œ", "ðŸ–¤",
            "ðŸ¤", "ðŸ¤Ž", "ðŸ’”", "â£ï¸", "ðŸ’•", "ðŸ’ž", "ðŸ’“", "ðŸ’—",
            "ðŸ’–", "ðŸ’˜", "ðŸ’", "ðŸ’Ÿ", "â˜®ï¸", "âœï¸", "â˜ªï¸", "ðŸ•‰ï¸",
            "â˜¸ï¸", "âœ¡ï¸", "ðŸ”¯", "ðŸ•Ž", "â˜¯ï¸", "â˜¦ï¸", "ðŸ›",

            // Celebration & Events
            "ðŸŽ‚", "ðŸŽ‰", "ðŸŽŠ", "ðŸŽ", "ðŸŽˆ", "ðŸŽ€", "ðŸŽ†", "ðŸŽ‡",
            "ðŸ§¨", "âœ¨", "ðŸŽ„", "ðŸŽƒ", "ðŸŽ—ï¸", "ðŸŽŸï¸", "ðŸŽ«",

            // Awards & Achievements
            "ðŸ†", "ðŸ…", "ðŸ¥‡", "ðŸ¥ˆ", "ðŸ¥‰", "â­", "ðŸŒŸ",

            // Time & Calendar Related
            "â°", "â±ï¸", "â²ï¸", "â³", "âŒ›", "ðŸ•°ï¸", "ðŸ•", "ðŸ•‘",
            "ðŸ•’", "ðŸ•“", "ðŸ•”", "ðŸ••", "ðŸ•–", "ðŸ•—", "ðŸ•˜", "ðŸ•™",
            "ðŸ•š", "ðŸ•›", "ðŸ“…", "ðŸ“†", "ðŸ—“ï¸", "ðŸ“‹", "ðŸ“Œ", "ðŸ“",

            // Work & Business
            "ðŸ’¼", "ðŸ‘”", "ðŸŽ“", "ðŸ“Š", "ðŸ“ˆ", "ðŸ“‰", "ðŸ’°", "ðŸ’µ",
            "ðŸ’´", "ðŸ’¶", "ðŸ’·", "ðŸ’³", "ðŸ’Ž", "âš–ï¸", "ðŸ”§", "ðŸ”¨",
            "âš’ï¸", "ðŸ› ï¸", "âš™ï¸", "ðŸ”©", "â›ï¸", "ðŸª›", "ðŸªš", "ðŸ”«",

            // Professions
            "ðŸ‘¨â€âš•ï¸", "ðŸ‘©â€âš•ï¸", "ðŸ‘¨â€ðŸŽ“", "ðŸ‘©â€ðŸŽ“", "ðŸ‘¨â€ðŸ«", "ðŸ‘©â€ðŸ«", "ðŸ‘¨â€âš–ï¸", "ðŸ‘©â€âš–ï¸",
            "ðŸ‘¨â€ðŸŒ¾", "ðŸ‘©â€ðŸŒ¾", "ðŸ‘¨â€ðŸ³", "ðŸ‘©â€ðŸ³", "ðŸ‘¨â€ðŸ”§", "ðŸ‘©â€ðŸ”§", "ðŸ‘¨â€ðŸ­", "ðŸ‘©â€ðŸ­",
            "ðŸ‘¨â€ðŸ’¼", "ðŸ‘©â€ðŸ’¼", "ðŸ‘¨â€ðŸ”¬", "ðŸ‘©â€ðŸ”¬", "ðŸ‘¨â€ðŸ’»", "ðŸ‘©â€ðŸ’»", "ðŸ‘¨â€ðŸŽ¤", "ðŸ‘©â€ðŸŽ¤",
            "ðŸ‘¨â€ðŸŽ¨", "ðŸ‘©â€ðŸŽ¨", "ðŸ‘¨â€âœˆï¸", "ðŸ‘©â€âœˆï¸", "ðŸ‘¨â€ðŸš€", "ðŸ‘©â€ðŸš€", "ðŸ‘¨â€ðŸš’", "ðŸ‘©â€ðŸš’",
            "ðŸ‘®", "ðŸ‘®â€â™‚ï¸", "ðŸ‘®â€â™€ï¸", "ðŸ•µï¸", "ðŸ•µï¸â€â™‚ï¸", "ðŸ•µï¸â€â™€ï¸", "ðŸ’‚", "ðŸ’‚â€â™‚ï¸", "ðŸ’‚â€â™€ï¸",
            "ðŸ‘·", "ðŸ‘·â€â™‚ï¸", "ðŸ‘·â€â™€ï¸", "ðŸ¤´", "ðŸ‘¸", "ðŸ‘³", "ðŸ‘³â€â™‚ï¸", "ðŸ‘³â€â™€ï¸",
            "ðŸ§‘â€âš•ï¸", "ðŸ§‘â€ðŸŽ“", "ðŸ§‘â€ðŸ«", "ðŸ§‘â€âš–ï¸", "ðŸ§‘â€ðŸŒ¾", "ðŸ§‘â€ðŸ³", "ðŸ§‘â€ðŸ”§", "ðŸ§‘â€ðŸ­",
            "ðŸ§‘â€ðŸ’¼", "ðŸ§‘â€ðŸ”¬", "ðŸ§‘â€ðŸ’»", "ðŸ§‘â€ðŸŽ¤", "ðŸ§‘â€ðŸŽ¨", "ðŸ§‘â€âœˆï¸", "ðŸ§‘â€ðŸš€", "ðŸ§‘â€ðŸš’",

            // Sports & Activities
            "âš½", "âš¾", "ðŸ¥Ž", "ðŸ€", "ðŸ", "ðŸˆ", "ðŸ‰", "ðŸŽ¾",
            "ðŸ¥", "ðŸŽ³", "ðŸ", "ðŸ‘", "ðŸ’", "ðŸ¥", "ðŸ“", "ðŸ¸",
            "ðŸ¥Š", "ðŸ¥‹", "ðŸ¥…", "â›³", "â›¸ï¸", "ðŸŽ£", "ðŸ¤¿", "ðŸŽ½",
            "ðŸŽ¿", "ðŸ›·", "ðŸ¥Œ", "ðŸŽ¯", "ðŸª€", "ðŸª", "ðŸŽ±", "ðŸŽ®",
            "ðŸ•¹ï¸", "ðŸŽ°", "ðŸŽ²", "ðŸ§©", "ðŸ§¸", "ðŸª…", "ðŸª†", "â™ ï¸",
            "â™¥ï¸", "â™¦ï¸", "â™£ï¸", "â™Ÿï¸", "ðŸƒ", "ðŸ€„", "ðŸŽ´", "ðŸŽ­",
            "ðŸ–¼ï¸", "ðŸŽ¨", "ðŸ§µ", "ðŸª¡", "ðŸ§¶", "ðŸª¢",

            // Exercise & Fitness
            "ðŸ¤¸", "ðŸ¤¸â€â™‚ï¸", "ðŸ¤¸â€â™€ï¸", "ðŸ¤¼", "ðŸ¤¼â€â™‚ï¸", "ðŸ¤¼â€â™€ï¸", "ðŸ¤½", "ðŸ¤½â€â™‚ï¸", "ðŸ¤½â€â™€ï¸",
            "ðŸ¤¾", "ðŸ¤¾â€â™‚ï¸", "ðŸ¤¾â€â™€ï¸", "ðŸ¤¹", "ðŸ¤¹â€â™‚ï¸", "ðŸ¤¹â€â™€ï¸", "ðŸ§˜", "ðŸ§˜â€â™‚ï¸", "ðŸ§˜â€â™€ï¸",
            "ðŸƒ", "ðŸƒâ€â™‚ï¸", "ðŸƒâ€â™€ï¸", "ðŸš´", "ðŸš´â€â™‚ï¸", "ðŸš´â€â™€ï¸", "ðŸšµ", "ðŸšµâ€â™‚ï¸", "ðŸšµâ€â™€ï¸",
            "ðŸŠ", "ðŸŠâ€â™‚ï¸", "ðŸŠâ€â™€ï¸", "ðŸ‹ï¸", "ðŸ‹ï¸â€â™‚ï¸", "ðŸ‹ï¸â€â™€ï¸", "ðŸ§—", "ðŸ§—â€â™‚ï¸", "ðŸ§—â€â™€ï¸",

            // Transportation
            "ðŸš—", "ðŸš•", "ðŸš™", "ðŸšŒ", "ðŸšŽ", "ðŸŽï¸", "ðŸš“", "ðŸš‘",
            "ðŸš’", "ðŸš", "ðŸ›»", "ðŸšš", "ðŸš›", "ðŸšœ", "ðŸï¸", "ðŸ›µ",
            "ðŸš²", "ðŸ›´", "ðŸ›¹", "ðŸ›¼", "ðŸš¨", "ðŸš”", "ðŸš", "ðŸš˜",
            "ðŸš–", "ðŸš¡", "ðŸš ", "ðŸšŸ", "ðŸšƒ", "ðŸš‹", "ðŸšž", "ðŸš",
            "ðŸš„", "ðŸš…", "ðŸšˆ", "ðŸš‚", "ðŸš†", "ðŸš‡", "ðŸšŠ", "ðŸš‰",
            "âœˆï¸", "ðŸ›«", "ðŸ›¬", "ðŸ›©ï¸", "ðŸ’º", "ðŸš", "ðŸ›°ï¸", "ðŸš€",
            "ðŸ›¸", "ðŸš¢", "â›µ", "ðŸš¤", "ðŸ›¥ï¸", "â›´ï¸", "ðŸ›³ï¸",

            // Food & Dining
            "ðŸ•", "ðŸ”", "ðŸŸ", "ðŸŒ­", "ðŸ¿", "ðŸ§ˆ", "ðŸ–", "ðŸ—",
            "ðŸ¥©", "ðŸ¥“", "ðŸ”", "ðŸ•", "ðŸŒ®", "ðŸŒ¯", "ðŸ¥™", "ðŸ§†",
            "ðŸ¥š", "ðŸ³", "ðŸ¥˜", "ðŸ²", "ðŸ¥£", "ðŸ¥—", "ðŸ±", "ðŸ˜",
            "ðŸ™", "ðŸš", "ðŸ›", "ðŸœ", "ðŸ", "ðŸ ", "ðŸ¢", "ðŸ£",
            "ðŸ¤", "ðŸ¥", "ðŸ¥®", "ðŸ¡", "ðŸ¥Ÿ", "ðŸ¥ ", "ðŸ¥¡", "ðŸ¦ª",
            "ðŸ¦", "ðŸ§", "ðŸ¨", "ðŸ©", "ðŸª", "ðŸŽ‚", "ðŸ°", "ðŸ§",
            "ðŸ¥§", "ðŸ«", "ðŸ¬", "ðŸ­", "ðŸ®", "ðŸ¯", "ðŸ¼", "ðŸ¥›",
            "â˜•", "ðŸ«–", "ðŸµ", "ðŸ¶", "ðŸ¾", "ðŸ·", "ðŸ¸", "ðŸ¹",
            "ðŸº", "ðŸ»", "ðŸ¥‚", "ðŸ¥ƒ", "ðŸ¥¤", "ðŸ§‹", "ðŸ§ƒ", "ðŸ§‰",
            "ðŸ´", "ðŸ½ï¸", "ðŸ¥„", "ðŸ”ª", "ðŸº",

            // Music & Arts
            "ðŸŽµ", "ðŸŽ¶", "ðŸŽ¼", "ðŸŽ¹", "ðŸŽ¸", "ðŸŽº", "ðŸŽ·", "ðŸ¥",
            "ðŸª•", "ðŸŽ»", "ðŸª˜", "ðŸŽ§", "ðŸŽ¤", "ðŸŽ¬", "ðŸŽª", "ðŸŽ¨",

            // Nature & Weather
            "â˜€ï¸", "ðŸŒ¤ï¸", "â›…", "ðŸŒ¥ï¸", "â˜ï¸", "ðŸŒ¦ï¸", "ðŸŒ§ï¸", "â›ˆï¸",
            "ðŸŒ©ï¸", "ðŸŒ¨ï¸", "â„ï¸", "â˜ƒï¸", "â›„", "ðŸŒ¬ï¸", "ðŸ’¨", "ðŸ’§",
            "ðŸ’¦", "â˜”", "ðŸŒŠ", "ðŸŒˆ", "âš¡", "â˜„ï¸", "ðŸ’¥", "ðŸ”¥",
            "ðŸŒ", "ðŸŒŽ", "ðŸŒ", "ðŸŒ", "ðŸŒ‘", "ðŸŒ’", "ðŸŒ“", "ðŸŒ”",
            "ðŸŒ•", "ðŸŒ–", "ðŸŒ—", "ðŸŒ˜", "ðŸŒ™", "ðŸŒš", "ðŸŒ›", "ðŸŒœ",
            "ðŸŒ", "ðŸŒž", "â­", "ðŸŒŸ", "âœ¨", "ðŸŒ ",

            // Plants & Flowers
            "ðŸŒ¸", "ðŸ’®", "ðŸµï¸", "ðŸŒ¹", "ðŸ¥€", "ðŸŒº", "ðŸŒ»", "ðŸŒ¼",
            "ðŸŒ·", "ðŸŒ±", "ðŸª´", "ðŸŒ²", "ðŸŒ³", "ðŸŒ´", "ðŸŒµ", "ðŸŒ¾",
            "ðŸŒ¿", "â˜˜ï¸", "ðŸ€", "ðŸ", "ðŸ‚", "ðŸƒ",

            // Animals & Pets
            "ðŸ¶", "ðŸ±", "ðŸ­", "ðŸ¹", "ðŸ°", "ðŸ¦Š", "ðŸ»", "ðŸ¼",
            "ðŸ¨", "ðŸ¯", "ðŸ¦", "ðŸ®", "ðŸ·", "ðŸ¸", "ðŸµ", "ðŸ¦„",
            "ðŸ”", "ðŸ§", "ðŸ¦", "ðŸ¤", "ðŸ¦†", "ðŸ¦…", "ðŸ¦‰", "ðŸ¦‡",
            "ðŸº", "ðŸ—", "ðŸ´", "ðŸ¦“", "ðŸ¦’", "ðŸ¦˜", "ðŸ¦¬", "ðŸ˜",
            "ðŸ¦", "ðŸ¦›", "ðŸª", "ðŸ«", "ðŸ¦™", "ðŸ‘", "ðŸ", "ðŸ¦Œ",
            "ðŸ•", "ðŸ©", "ðŸ¦®", "ðŸ•â€ðŸ¦º", "ðŸˆ", "ðŸˆâ€â¬›", "ðŸª¶", "ðŸ“",
            "ðŸ¦ƒ", "ðŸ¦¤", "ðŸ¦š", "ðŸ¦œ", "ðŸ¦¢", "ðŸ¦©", "ðŸ¦", "ðŸ¦¨",
            "ðŸ¦¡", "ðŸ¦¦", "ðŸ¦¥", "ðŸ", "ðŸ€", "ðŸ¿ï¸", "ðŸ¦”", "ðŸ¾",

            // Technology & Communication
            "ðŸ’»", "ðŸ–¥ï¸", "ðŸ–¨ï¸", "âŒ¨ï¸", "ðŸ–±ï¸", "ðŸ–²ï¸", "ðŸ•¹ï¸", "ðŸ’½",
            "ðŸ’¾", "ðŸ’¿", "ðŸ“€", "ðŸ“±", "ðŸ“ž", "â˜Žï¸", "ðŸ“Ÿ", "ðŸ“ ",
            "ðŸ“¡", "ðŸ”‹", "ðŸ”Œ", "ðŸ’¡", "ðŸ”¦", "ðŸ•¯ï¸", "ðŸª”", "ðŸ“§",
            "ðŸ“¨", "ðŸ“©", "ðŸ“¤", "ðŸ“¥", "ðŸ“¦", "ðŸ“«", "ðŸ“ª", "ðŸ“¬",
            "ðŸ“­", "ðŸ“®", "âœ‰ï¸", "ðŸ“ƒ", "ðŸ“„", "ðŸ“‘", "ðŸ§¾", "ðŸ“Š",

            // Books & Education
            "ðŸ“•", "ðŸ“—", "ðŸ“˜", "ðŸ“™", "ðŸ“”", "ðŸ““", "ðŸ“’", "ðŸ“š",
            "ðŸ“–", "ðŸ”–", "ðŸ—žï¸", "ðŸ“°", "ðŸ“œ", "ðŸ“ƒ", "ðŸ“„", "ðŸ“‘",
            "âœï¸", "âœ’ï¸", "ðŸ–‹ï¸", "ðŸ–Šï¸", "ðŸ–Œï¸", "ðŸ–ï¸", "ðŸ“",

            // Buildings & Places
            "ðŸ ", "ðŸ¡", "ðŸ¢", "ðŸ£", "ðŸ¤", "ðŸ¥", "ðŸ¦", "ðŸ¨",
            "ðŸ©", "ðŸª", "ðŸ«", "ðŸ¬", "ðŸ­", "ðŸ¯", "ðŸ°", "ðŸ’’",
            "ðŸ—¼", "ðŸ—½", "â›ª", "ðŸ•Œ", "ðŸ›•", "ðŸ•", "â›©ï¸", "ðŸ•‹",
            "â›²", "â›º", "ðŸŒ", "ðŸŒƒ", "ðŸ™ï¸", "ðŸŒ„", "ðŸŒ…", "ðŸŒ†",
            "ðŸŒ‡", "ðŸŒ‰", "ðŸŽ ", "ðŸŽ¡", "ðŸŽ¢", "ðŸŽª",

            // Medical & Health
            "ðŸ’Š", "ðŸ’‰", "ðŸ©¸", "ðŸ©¹", "ðŸ©º", "ðŸ©»", "ðŸ§¬", "ðŸ¦ ",
            "ðŸ§ª", "ðŸ§«", "ðŸ§´", "ðŸ§¼", "ðŸª¥", "ðŸª’", "ðŸš¿", "ðŸ›",

            // Checkmarks & Status
            "âœ…", "âœ”ï¸", "â˜‘ï¸", "âŒ", "âŽ", "â­•", "ðŸš«", "â›”",
            "ðŸ“›", "ðŸ”ž", "ðŸ”•", "ðŸ”‡", "ðŸ”ˆ", "ðŸ”‰", "ðŸ”Š", "ðŸ“¢",
            "ðŸ“£", "ðŸ””", "ðŸ”•", "âš ï¸", "ðŸš¸", "âš¡",

            // Zodiac & Astrology
            "â™ˆ", "â™‰", "â™Š", "â™‹", "â™Œ", "â™", "â™Ž", "â™",
            "â™", "â™‘", "â™’", "â™“", "â›Ž", "ðŸ”®", "ðŸ§¿",

            // Miscellaneous Symbols
            "ðŸ†”", "âš›ï¸", "ðŸ‰‘", "â˜¢ï¸", "â˜£ï¸", "ðŸ“´", "ðŸ“³",
            "ðŸ†š", "ðŸ’®", "ðŸ‰", "ãŠ™ï¸", "ãŠ—ï¸", "ðŸ†˜", "ðŸš©",
            "ðŸŽŒ", "ðŸ´", "ðŸ³ï¸", "ðŸ³ï¸â€ðŸŒˆ", "ðŸ³ï¸â€âš§ï¸", "ðŸ´â€â˜ ï¸"
        )

        val emojiAdapter = EmojiAdapter(activity, emojis, currentEmoji) { emoji ->
            callback(emoji)
            dialog?.dismiss()
        }

        binding.emojiGrid.apply {
            layoutManager = GridLayoutManager(activity, 8)
            adapter = emojiAdapter
        }

        activity.getAlertDialogBuilder()
            .apply {
                setNeutralButton(R.string.remove_emoji) { dialog, _ ->
                    callback("")
                    dialog?.dismiss()
                }

                activity.setupDialogStuff(binding.root, this, R.string.event_emoji) {
                    dialog = it
                }
            }
    }
}
